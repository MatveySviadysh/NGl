{% load static %}

<link rel="stylesheet" href="{% static 'user/scss/Tutor/TutorList.scss' %}">

{% include 'user/components/Header.html' %}
<div class="container">
    <div class="text-column">
        <p>заказ 1%</p>
        <a href={% url 'help-page' %}><p>пожержка</p></a>
    </div>
    <div class="tutor-column">
        <div class="tutor-list">
            <ul>
                <li>
                    <form method="POST" action="{% url 'create_order' %}" onsubmit="return validateSpecialization()">
                        {% csrf_token %}
                        <ul>
                            <li>
                                <label>Для кого нужен специалист?</label><br>
                                <input type="radio" name="target_audience" value="для себя"> Для себя<br>
                                <input type="radio" name="target_audience" value="для ребенка"> Для ребенка<br>
                                <input type="radio" name="target_audience" value="для семьи"> Для семьи<br>
                            </li>
                            <li>
                                <label>Ваш возраст:</label>
                                <input type="number" name="age" required min="1">
                            </li>
                            <li>
                                <label>Пол специалиста:</label><br>
                                <input type="radio" name="gender" value="мужчина"> Мужчина<br>
                                <input type="radio" name="gender" value="женщина"> Женщина<br>
                                <input type="radio" name="gender" value="не важно"> Не важно<br>
                            </li>
                            <li>
                                <label>Сколько консультаций планируете?</label><br>
                                <input type="radio" name="consultation_count" value="1-2"> 1-2<br>
                                <input type="radio" name="consultation_count" value="решу позже"> Решу после первой консультации<br>
                            </li>
                            <li>
                                <label>В каком формате удобно встречаться со специалистом?</label><br>
                                <input type="radio" name="meeting_format" value="онлайн"> Онлайн<br>
                                <input type="radio" name="meeting_format" value="лично"> Лично<br>
                            </li>
                            <li>
                                <label>Выберите подходящую стоимость встреч с психологом:</label><br>
                                <input type="number" step=".01" name="price" required min="0">
                            </li>
                            <li>
                                <label>Пожелания для специалиста:</label><br>
                                <textarea name="comments" rows="4"></textarea>
                            </li>
                            <li>
                                <label>Специализация специалиста:</label><br>
                                <!-- Call the validateAndCapitalizeInput function on input -->
                                <input type="text" id="specialization" name="specialization"
                                       required placeholder="Введите специализацию"
                                       oninput="validateAndCapitalizeInput(this)">
                            </li>
                        </ul>
                        <button type="submit">Отправить</button>
                    </form>

                    <!-- JavaScript for validation and capitalization -->
                    <script>
                        function validateAndCapitalizeInput(input) {
                            // Удаляем все символы, кроме русских букв и пробелов
                            input.value = input.value.replace(/[^а-яА-ЯёЁ\s]/g, '');
    
                            // Преобразуем каждое слово в заглавную букву
                            const words = input.value.split(' ');
                            for (let i = 0; i < words.length; i++) {
                                if (words[i]) {
                                    words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1).toLowerCase();
                                }
                            }
                            input.value = words.join(' ');
                        }

                        function validateSpecialization() {
                            const specializationInput = document.getElementById('specialization');
                            const specializationValue = specializationInput.value.trim();

                            // Check if the first letter is uppercase
                            if (specializationValue.length === 0 || !/^[А-ЯЁ]/.test(specializationValue)) {
                                alert('Специализация должна начинаться с заглавной буквы и быть на русском языке.');
                                return false; // Prevent form submission
                            }

                            // Check if the input contains only Russian letters and spaces
                            if (!/^[А-ЯЁа-яё\s]+$/.test(specializationValue)) {
                                alert('Специализация должна содержать только русские буквы.');
                                return false; // Prevent form submission
                            }

                            return true; // Allow form submission
                        }
                    </script>

                </li>
            </ul>
        </div>
     </div>
</div>

{% include 'mybot/HelpWindow.html' %}
