{% load static %}

<link rel="stylesheet" href="{% static 'user/scss/main_page/FontMain.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/MainPage.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/Review.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/Order.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/ReviewContainer.scss' %}">

{% include 'user/components/Header.html' %}

<body>
    <div class="main-page">
        <h1 class="header-title">–ö–∞–∂–¥—ã–π —à–∞–≥ –±–ª–∏–∑–∏—Ç –∫ —Ü–µ–ª–∏</h1>
        <p class = "count-users">{{ user_count }} –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ–≤–µ—Ä–∏–ª–∏—Å—å –Ω–∞–º</p>

        <form action="{% url 'tutor-list-serarch' %}" method="GET" onsubmit="return capitalizeFirstLetter()">
            <input class="search-bar" type="text" id="query" name="query" placeholder="–í–≤–µ–¥–∏—Ç–µ —É—Å–ª—É–≥—É –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞" value="{{ query }}" required>
            <button class="search-button" type="submit">–ù–∞–π—Ç–∏</button>
        </form>
        
        <script>
            function capitalizeFirstLetter() {
                var inputField = document.getElementById("query");
                var value = inputField.value;
                if (value.length > 0) {
                    value = value.charAt(0).toUpperCase() + value.slice(1);
                    inputField.value = value;
                }
                return true;
            }
        </script>
        
        <div class="container-images">
            <div class="specializations-container">
                {% for specialization in popular_specializations %}
                    <div class="specialization-item">
                        <a href="{% url 'tutor_list' specialization.specialization %}">
                            <img src="{% static 'user/images/study_images/study' %}{{ forloop.counter }}.jpg" 

                         alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ {{ forloop.counter }}" 

                         style="width: 240px; height: 240px; border-radius: 10px;">
                        </a>
                        <a href="{% url 'tutor_list' specialization.specialization %}">{{ specialization.specialization }}</a>
                    </div>
                {% empty %}
                    <div>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</div>
                {% endfor %}
            </div>
        </div>
        
        <div class="chinese-course-section">
            <a class="course-guarantee">–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫: {{count_orders}}</a>
            <div class="course-text">–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ—é –∑–∞—è–≤–∫—É, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –≤–∞–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞! –ü—Ä–æ–π–¥–∏—Ç–µ –ª–µ–≥–∫—É—é —Ñ–æ—Ä–º—É –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –∏—â–∏—Ç–µ —É–∂–µ –Ω—É–∂–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.</div>
            <div class="course-button">
                <a href="{% url 'create_order' %}" class="submit-application-btn">
                    –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                </a>
            </div>
            <img src="{% static 'user/images/bg_woman.jpg' %}" class="course-photo" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–µ–Ω—â–∏–Ω—ã" style="z-index: 1000;">
        </div>
        
        
        <p class="profi">–ù–∞—à–∏ –ø—Ä–æ—Ñ–∏</p>
        <div>
            <div class="text-column">
                {% for specialization in specializations %}
                    <div class="column">
                        <a class="textBox" href="{% url 'tutor_list' specialization %}">{{ specialization }}</a>
                    </div>
                {% empty %}
                    <div class="column">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π.</div>
                {% endfor %}
            </div>
        </div>

        <div class="how-it-works">
            <p class="how-text">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</p>
            <div class="images2">
                <img src="{% static 'user/images/study_images/study.gif' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 1">
                <img src="{% static 'user/images/study_images/study1.gif' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 2">
                <img src="{% static 'user/images/study_images/study2.gif' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 3">
            </div>
        </div>
        <div>
            <div class="imgText">
                <div class="column2">
                    <div class="title_column">–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</div>
                    <div>–ú—ã –∑–∞–¥–∞–¥–∏–º –≤—Å–µ –≤–∞–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –≤–∞–º –±—ã–ª–æ –ø—Ä–æ—â–µ –æ–ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á—É.</div>
                </div>
                <div class="column2">
                    <div class="title_column">–ù–∞–ø–∏—à–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º</div>
                    <div>–£—Ç–æ—á–Ω–∏—Ç–µ –ø–æ –ø–æ–≤–æ–¥—É –∑–∞–∫–∞–∑–∞. –û–Ω–∏ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å.</div>
                </div>
                <div class="column2">
                    <div class="title_column">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ</div>
                    <div>–û–±–æ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª—è—Ö –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞–π—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º –∏ –ø–ª–∞—Ç–∏—Ç–µ –µ–º—É –Ω–∞–ø—Ä—è–º—É—é.</div>
                </div>
            </div>
        </div>
    </div>
    

    {% include 'mybot/HelpWindow.html' %}

        <div class="chinese-course-section2">
            <div class="course-image2">
                <img src="{% static 'user/images/review_woman2.jpg' %}" class="course-photo2" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–µ–Ω—â–∏–Ω—ã">
                <h3 class="course-guarantee2">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤: 34</h3>
                <div class="course-text2">–°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–∑—ã–≤ –æ —Å–≤–æ–∏—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è—Ö! –ù–∞–ø–∏—à–∏—Ç–µ –≤—Å–µ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –æ –Ω–∞—Å. –ù–∞–¥–µ—é—Å—å, —á—Ç–æ –Ω–∞—à–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—Å—è –∏ –≤ –±—É–¥—É—â–µ–º, –ø—Ä–∏–Ω–æ—Å—è –≤—Å–µ –±–æ–ª—å—à–µ –∑–Ω–∞–Ω–∏–π!</div>
                <div class="course-button2">
                    <a href="#reviewSection" class="toggle-button">–°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤</a>
                </div>
            </div>
        </div>

    <div class="reviews-container">
        <h1 class = 'title-review'>–û—Ç–∑—ã–≤—ã</h1>
        <div class="reviews-grid">
            {% for review in random_reviews %}
                <div class="review-card">
                    <div class="avatar-container">
                        {% with review.user.userprofile as profile %}
                            {% if profile.avatar %}
                                <img src="{{ profile.avatar.url }}" class="avatar-img" alt="–ê–≤–∞—Ç–∞—Ä">
                            {% else %}
                                <img src="{% static 'user/images/default_avatar.jpg' %}" class="avatar-img" alt="–î–µ—Ñ–æ–ª—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä">
                            {% endif %}
                        {% endwith %}
                    </div>
                    <div >
                        {% with "0 1 2 3 4" as numbers %}
                            {% for i in numbers.split %}
                                {% if forloop.counter0 < review.rating %}
                                    üåü
                                {% else %}
                                    ‚ú©
                                {% endif %}
                            {% endfor %}
                        {% endwith %}
                    </div>
                    <div class="review-content">
                        <strong class="review-name">
                            {{ review.username }}
                        </strong>
                        
                        <p class="review-comment">{{ review.comment }}</p>
                    </div>
                </div>
            {% empty %}
                <p>–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
            {% endfor %}
        </div>
    </div>

    <div class="review-form" id="reviewSection" style="display: none;">
        <form method="POST" action="{% url 'review_create' %}" class="form">
            {% csrf_token %}
        
            <div class="form-group">
                <label for="id_comment" class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <textarea id="id_comment" name="comment" class="form-textarea" rows="4" required></textarea>
            </div>
        
            <div class="form-group">
                <label for="id_rating" class="form-label">–†–µ–π—Ç–∏–Ω–≥:</label>
                <select id="id_rating" name="rating" class="form-select" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
    
            <div class="form-group">
                <button type="submit" class="form-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
            </div>
        </form>
    </div>
    

{% include 'user/components/Fotter.html' %}

<script src="{% static 'user/js/Review.js' %}"></script>

<style>
    .review-comment {
        max-width: 200px;
        margin: 10px 0;
        font-size: 1.1em;
        text-align: center;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: normal;
    }
    .review-card:hover {
        transform: scale(1.05);
        background-color: rgba(255, 255, 255, 0.9);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
    .imgText {
        display: flex;
        justify-content: space-between;
        margin: 2rem 0;
    }

    .column2 {
        flex: 1;
        margin: 0 1rem;
        padding: 0;
        transition: box-shadow 0.3s;
        border-radius: 8px;
    }

    .title_column {
        font-size: 1.5rem;
        font-weight: bold;
    }
    @media (max-width: 768px) {
        .imgText {
            flex-direction: column;
        }

        .column2 {
            margin: 1rem 0;
        }
    }
</style>
