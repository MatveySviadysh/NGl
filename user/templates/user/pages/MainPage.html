{% load static %}

<link rel="stylesheet" href="{% static 'user/scss/main_page/FontMain.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/MainPage.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/Review.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/Order.scss' %}">
<link rel="stylesheet" href="{% static 'user/scss/main_page/ReviewContainer.scss' %}">

{% include 'user/components/Header.html' %}

<body>
    <div class="main-page">
        <h1 class="header-title">–ò–¥–µ–∞–ª—å–Ω—ã–º –±—ã—Ç—å –ª–µ–≥–∫–æ</h1>
        <p class = "count-users">{{ user_count }} –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ–≤–µ—Ä–∏–ª–∏—Å—å –Ω–∞–º</p>

        <form action="{% url 'tutor-list-serarch' %}" method="GET" class="search-container" style="position: relative;">
            <input class="search-bar" type="text" name="query" placeholder="–£—Å–ª—É–≥–∞ –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç" value="{{ query }}">
            <button class="search-button" type="submit">–ù–∞–π—Ç–∏</button>
        </form>
        
        <div class="container-images">
            <div class="images">
                <img src="{% static 'user/images/study_images/study1.jpg' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 1">
                <img src="{% static 'user/images/study_images/study2.jpg' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 2">
                <img src="{% static 'user/images/study_images/study3.jpg' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 3">
                <img src="{% static 'user/images/study_images/study4.jpg' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 4">
            </div>
            <div class="specializations-container">
                {% for specialization in popular_specializations %}
                    <div class="specialization-item">
                        <a href="{% url 'tutor_list' specialization.specialization %}">{{ specialization.specialization }}</a>
                    </div>
                {% empty %}
                    <div>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</div>
                {% endfor %}
            </div>
        </div>

        {% if not user.tutor %}
            <div class="chinese-course-section">
                <div class="course-content">
                    <h3 class="course-guarantee">–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—è–≤–æ–∫:{{count_orders}}</h3>
                    
                    <div class="course-button">
                        <a href="{% url 'create_order' %}" class="submit-application-btn">
                            –û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                        </a>
                    </div>
                </div>
                <div class="course-image">
                    <img src="{% static 'user/images/bg_woman.jpg' %}" class="course-photo" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–µ–Ω—â–∏–Ω—ã">
                </div>
            </div>
        {% endif %}

        <p class="profi">–ù–∞—à–∏ –ø—Ä–æ—Ñ–∏</p>
        <div>
            <div class="text-column">
                {% for specialization in specializations %}
                    <div class="column">
                        <a class="textBox" href="{% url 'tutor_list' specialization %}">{{ specialization }}</a>
                    </div>
                {% empty %}
                    <div class="column">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π.</div>
                {% endfor %}
            </div>
        </div>

        <div class="how-it-works">
            <p class="profi">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</p>
            <div class="images2">
                <img src="{% static 'user/images/study_images/study.gif' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 1">
                <img src="{% static 'user/images/study_images/study1.gif' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 2">
                <img src="{% static 'user/images/study_images/study2.gif' %}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 3">
            </div>
        </div>
        <div>
            <div class="imgText">
                <div class="column2">
                    <div class="title_column">–æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</div>
                    <div>–ú—ã –∑–∞–¥–∞–¥–∏–º –≤—Å–µ –≤–∞–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –≤–∞–º –±—ã–ª–æ –ø—Ä–æ—â–µ –æ–ø–∏—Å–∞—Ç—å –∑–∞–¥–∞—á—É.</div>
                </div>
                <div class="column2">
                    <div class="title_column">–ù–∞–ø–∏—à–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º</div>
                    <div>–£—Ç–æ—á–Ω–∏—Ç–µ –ø–æ –ø–æ–≤–æ–¥—É –∑–∞–∫–∞–∑–∞. –û–Ω–∏ –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å.</div>
                </div>
                <div class="column2">
                    <div class="title_column">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ</div>
                    <div>–û–±–æ –≤—Å–µ—Ö –¥–µ—Ç–∞–ª—è—Ö –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞–π—Ç–µ—Å—å —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º –∏ –ø–ª–∞—Ç–∏—Ç–µ –µ–º—É –Ω–∞–ø—Ä—è–º—É—é.</div>
                </div>
            </div>
        </div>
    </div>
    

    {% include 'mybot/HelpWindow.html' %}

    {% if user.is_authenticated %}
        <div class="chinese-course-section2">
            <div class="course-image2">
                <img src="{% static 'user/images/review_woman2.jpg' %}" class="course-photo2" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–µ–Ω—â–∏–Ω—ã">
                <h3 class="course-guarantee2">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤: 34</h3>
                <div class="course-button2">
                    <a href="#reviewSection" class="toggle-button">–°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤</a>
                </div>
            </div>
        </div>
    {% endif %}


    <div class="reviews-container">
        <h1 class = 'title-review'>–û—Ç–∑—ã–≤—ã</h1>
        <div class="reviews-grid">
            {% for review in random_reviews %}
                <div class="review-card">
                    <div class="avatar-container">
                        {% with review.user.userprofile as profile %}
                            {% if profile.avatar %}
                                <img src="{{ profile.avatar.url }}" class="avatar-img" alt="–ê–≤–∞—Ç–∞—Ä">
                            {% else %}
                                <img src="{% static 'user/images/default_avatar.jpg' %}" class="avatar-img" alt="–î–µ—Ñ–æ–ª—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä">
                            {% endif %}
                        {% endwith %}
                    </div>
                    
                    <div class="review-content">
                        <strong class="review-name">
                            {{ review.username }}
                        </strong>
                        <div class="review-rating">
                            {% with "0 1 2 3 4" as numbers %}
                                {% for i in numbers.split %}
                                    {% if forloop.counter0 < review.rating %}
                                        üåü
                                    {% else %}
                                        ‚ú©
                                    {% endif %}
                                {% endfor %}
                            {% endwith %}
                        </div>
                        <p class="review-comment">{{ review.comment }}</p>
                    </div>
                </div>
            {% empty %}
                <p>–û—Ç–∑—ã–≤–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
            {% endfor %}
        </div>
    </div>

    <div class="review-form" id="reviewSection" style="display: none;">
        <form method="POST" action="{% url 'review_create' %}" class="form">
            {% csrf_token %}
        
            <div class="form-group">
                <label for="id_comment" class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <textarea id="id_comment" name="comment" class="form-textarea" rows="4" required></textarea>
            </div>
        
            <div class="form-group">
                <label for="id_rating" class="form-label">–†–µ–π—Ç–∏–Ω–≥:</label>
                <select id="id_rating" name="rating" class="form-select" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>
    
            <div class="form-group">
                <button type="submit" class="form-button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</button>
            </div>
        </form>
    </div>
    

{% include 'user/components/Fotter.html' %}

<script src="{% static 'user/js/Review.js' %}"></script>

<style>
    .imgText {
        display: flex; /* Ensure flex layout for columns */
        justify-content: space-between; /* Space out columns evenly */
        margin: 2rem 0; /* Space above and below the section */
    }

    .column2 {
        flex: 1; /* Distribute columns evenly */
        margin: 0 1rem; /* Add some space between columns */
        padding: 0; /* Remove padding inside the column */
        transition: box-shadow 0.3s; /* Smooth transition for hover effect */
        border-radius: 8px;
    }

    .title_column {
        font-size: 1.5rem; /* Title font size */
        font-weight: bold; /* Bold font for titles */
    }
    @media (max-width: 768px) {
        .imgText {
            flex-direction: column; /* Stack columns on small screens */
        }

        .column2 {
            margin: 1rem 0; /* Add vertical space between stacked columns */
        }
    }
</style>
